---
import { Icon } from "astro-icon";

const now = new Date();
const day = now.getDay(); // returns a number representing the day of the week, starting with 0 for Sunday
const hours = now.getHours();
const minutes = now.getMinutes();

import moment from "moment-timezone";
const timeMorocco = moment()
  .tz("Morocco/Casablanca")
  .utcOffset("+01:00")
  .format("h:mm A");
---

<style>
  @keyframes spina {
    100% {
      transform: rotate(360deg);
    }
  }

  .spin {
    animation: spina 10000ms linear infinite;
    animation-direction: reverse;
  }

  .parent .child {
    background: black; /* Set the initial background color */
    transition: background 0.2s; /* Apply transition to the background property */
  }

  .parent:hover .child {
    background: #6a57e3;
    transition: 0.2s;
  }
  .parent .arrow {
    transform: rotate(0deg);
    transition: transform 0.2s;
  }
  .parent:hover .arrow {
    transform: rotate(-45deg);
  }

  #gradient-canvas {
    width: 100%;
    height: 100%;
    --gradient-color-1: #ffadcd;
    --gradient-color-2: #d9b7ff;
    --gradient-color-3: #dffff2;
    --gradient-color-4: #ffffff;
  }

  .video {
    position: relative;
    top: 50%;
    transform: translateY(-50%);
    padding: 100px;
  }

  @media screen and (max-width: 800px) {
    .video {
      position: relative;
      top: 50%;
      transform: translateY(-50%);
      padding: 0px;
    }
  }

  .cta {
    top: auto;
    bottom: 22%;
    right: 30%;
    left: auto;
  }

  @media screen and (max-width: 800px) {
    .cta {
      position: relative;
      top: 50%;
      left: 50%;
      transform: translateY(-50%) translateX(-50%);
      padding: 0px;
      margin-top: 80px;
    }
  }
</style>

<section class="h-screen bg-no-repeat bg-cover">
  <canvas id="gradient-canvas" data-transition-in class="-z-10 absolute"
  ></canvas>

  <div class="relative md:max-w-screen-2xl mx-auto video">
    <video
      width="100%"
      height="100%"
      autoplay="autoplay"
      loop="loop"
      muted="muted"
      playsinline="playsinline"
    >
      <source src="../../Hero.webm" type="video/webm" />
    </video>

    <a
      href=""
      title="Réserver un consultation - Arlibera"
      onclick="Calendly.initPopupWidget({url: 'https://calendly.com/arlibera/30min'});return false;"
    >
      <div
        class="parent absolute cursor-pointer z-30 flex items-center justify-center cta"
      >
        <img
          src="../../consultation-arlibera-2.svg"
          class="child h-36 z-10 rounded-full p-3 spin cursor-pointer"
          alt="Arlibera Consultation"
        />
        <Icon
          name="system-uicons:arrow-right"
          class="h-10 text-white absolute z-20 arrow"
        />
      </div></a
    >
  </div>
  <div
    class="justify-between items-center md:px-20 pb-10 hidden md:flex absolute bottom-0 w-full left-0 right-0"
  >
    <Icon name="ph:diamond-thin" class="h-6" />

    <p class="text-xl">
      <span class="font-bold" id="time-container">Agence Creative</span><br />
      <span class="flex items-center"
        >basée au<img src="../../ma.svg" class="h-5 mx-2" /> Maroc</span
      >
    </p>
    <p class="text-xl">
      <span class="font-bold">Branding & Développement</span><br />des sites et
      applications Web
    </p>
    <p class="text-xl">
      <span class="font-bold" id="time-container">{timeMorocco}</span><br />
      <span class="flex items-center"> Casablanca</span>
    </p>

    <Icon name="teenyicons:arrow-down-outline" class="h-10" />
  </div>
</section>

<script>
  import { Gradient } from "../styles/Gradient.js";

  // Create your instance
  const gradient = new Gradient();

  // Call `initGradient` with the selector to your canvas
  gradient.initGradient("#gradient-canvas");
</script>
